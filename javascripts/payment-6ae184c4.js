(function(){var r,e,t,a;$(".stripe-number").payment("formatCardNumber"),$(".stripe-exp-date").payment("formatCardExpiry"),$(".stripe-cvc").payment("formatCardCVC"),r=$(".js-gift-form"),r.on("submit",function(){var r,e;return e=$(".stripe-exp-date").payment("cardExpiryVal"),$(".gift-form__email").toggleInputError(!$(".gift-form__email").val()),$(".stripe-name").toggleInputError(!$(".stripe-name").val()),$(".stripe-number").toggleInputError(!$.payment.validateCardNumber($(".stripe-number").val())),$(".stripe-exp-date").toggleInputError(!$.payment.validateCardExpiry(e)),$(".stripe-cvc").toggleInputError(!$.payment.validateCardCVC($(".stripe-cvc").val())),$(".gift-form__donated-amount").length&&(r=parseFloat($(".gift-form__donated-amount").val()),$(".gift-form__price").val(100*r)),$(".payment-errors").empty(),0===$(".has-error").length&&($(".gift-form__button").prop("disabled",!0).addClass("processing"),Stripe.card.createToken({name:$(".stripe-name").val(),number:$(".stripe-number").val(),cvc:$(".stripe-cvc").val(),exp_month:e.month,exp_year:e.year},a)),!1}),a=function(e,a){var n;return a.error?(r.find(".payment-errors").html("<span>"+a.error.message+"</span>"),$(".gift-form__button").prop("disabled",!1).removeClass("processing")):(n=a.id,r.append($('<input type="hidden" name="stripeToken">').val(n)),t())},t=function(){var t,a;return t=r.serialize(),a=r.attr("action"),$.post(a,t,function(r){return e(r)}),!1},e=function(e){return e.error?r.find(".payment-errors").html("<span>"+e.error.message+"</span>"):showModal($(".modal"),$(".js-thankyou")),$(".gift-form__button").prop("disabled",!1).removeClass("processing")}}).call(this);